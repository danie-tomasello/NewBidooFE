<div class="container-fluid pad" >
    <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0">
        <ngb-panel>
            <ng-template ngbPanelHeader>
                <div class="d-flex align-items-center justify-content-between">
                  <h5 class="m-0">Utenti registrati</h5>
                  <button ngbPanelToggle class="btn btn-link p-0"><i class="bi bi-caret-down"></i></button>
                </div>
            </ng-template>  
            <ng-template ngbPanelContent>
                <form>
                    <div class="form-group form-inline">
                        Cerca: <input class="form-control ml-2" type="text" name="searchTerm" [(ngModel)]="service.searchTerm"/>
                        <span class="ml-3" *ngIf="service.loading$ | async">Loading...</span>
                    </div>
                  
                    <table class="table table-striped">
                      <thead>
                      <tr>
                        <th scope="col" sortable="id" (sort)="onSort($event)">Id</th>
                        <th scope="col" sortable="username" (sort)="onSort($event)">Nome</th>
                        <th scope="col" sortable="email" (sort)="onSort($event)">Email</th>
                        <th scope="col" sortable="phoneNumber" (sort)="onSort($event)">Telefono</th>
                        <th scope="col" sortable="enabled" (sort)="onSort($event)">Attivo</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let user of users$ | async">
                        <th scope="row">
                          <ngb-highlight [result]="user.id | number" [term]="service.searchTerm"></ngb-highlight></th>
                        <td>
                          <ngb-highlight [result]="user.username" [term]="service.searchTerm"></ngb-highlight>
                        </td>
                        <td><ngb-highlight [result]="user.email" [term]="service.searchTerm"></ngb-highlight></td>
                        <td><ngb-highlight [result]="user.phoneNumber" [term]="service.searchTerm"></ngb-highlight></td>
                        <td><ngb-highlight [result]="user.enabled" [term]="service.searchTerm"></ngb-highlight></td>
                      </tr>
                      </tbody>
                    </table>
                  
                    <div class="d-flex justify-content-between p-2">
                      <ngb-pagination
                        [collectionSize]="(total$ | async)!" [(page)]="service.page" [pageSize]="service.pageSize">
                      </ngb-pagination>
                  
                      <select class="custom-select" style="width: auto" name="pageSize" [(ngModel)]="service.pageSize">
                        <option [ngValue]="5">5 items per page</option>
                        <option [ngValue]="10">10 items per page</option>
                        <option [ngValue]="15">15 items per page</option>
                      </select>
                    </div>
                  
                  </form>
            </ng-template>
        </ngb-panel>
        <ngb-panel>
            <ng-template ngbPanelHeader>
                <div class="d-flex align-items-center justify-content-between">
                  <h5 class="m-0">Nuovo utente</h5>
                  <button ngbPanelToggle class="btn btn-link p-0"><i class="bi bi-caret-down"></i></button>
                </div>
            </ng-template>  
            <ng-template ngbPanelContent>
            </ng-template>
        </ngb-panel>
    </ngb-accordion>
</div>